<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>News - U.S. Corbiolo C5</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="header">
    <img src="img/logo.png" alt="Logo" class="logo">
    <h1 class="page-title">News</h1>
    <div class="menu-icon" onclick="toggleMenu()">☰</div>
  </header>

  <div class="popup-menu" id="popupMenu">
    <a href="index.html">🏠 Home</a>
    <a href="news.html">🗞️ News</a>
    <a href="squadra.html">👥 Squadra</a>
    <a href="partite.html">📅 Partite</a>
    <a href="sponsor.html">💰 Sponsor</a>
  </div>

  <div class="box-row" id="news-container">
    <!-- Le notizie verranno caricate qui -->
  </div>

  <div class="footer">
    <div class="sponsor-title">Sponsor</div>
    <div class="carousel-wrapper">
      <div class="carousel-content">
        <img src="img/sponsor1.png" alt="Sponsor 1">
        <img src="img/sponsor2.png" alt="Sponsor 2">
        <img src="img/sponsor3.png" alt="Sponsor 3">
        <img src="img/sponsor1.png" alt="Sponsor 1 clone">
        <img src="img/sponsor2.png" alt="Sponsor 2 clone">
        <img src="img/sponsor3.png" alt="Sponsor 3 clone">
      </div>
    </div>
  </div>

 <script>
  function toggleMenu() {
    const menu = document.getElementById('popupMenu');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
  }

  async function loadNews() {
    const NEWS_API = "https://script.google.com/macros/s/AKfycbwmdjLdIbdISpa4ISXRnMk-AreQSeCZggiaHI35rpkdQexhbLzVgEu-P1dLXCBj5B_qUA/exec";
    try {
      const res = await fetch(NEWS_API);
      const data = await res.json();

      const container = document.getElementById("news-container");
      container.innerHTML = "";

      data.forEach(news => {
        const section = document.createElement("div");
        section.className = "section";

        const img = document.createElement("img");
        img.src = news.image;
        img.alt = news.title;
        img.className = "team-logo";

        const titleDiv = document.createElement("div");
        titleDiv.className = "section-title-icon";

        const titleText = document.createElement("span");
        titleText.textContent = news.title;

        titleDiv.appendChild(titleText);

        // Badge se è nuova
        if (news.nuova === "✅" || news.nuova === "true" || news.nuova === "TRUE") {
          const badge = document.createElement("span");
          badge.textContent = " NUOVA";
          badge.className = "badge-news";
          titleDiv.appendChild(badge);
        }

        const content = document.createElement("p");
        content.textContent = news.content;

        section.appendChild(img);
        section.appendChild(titleDiv);
        section.appendChild(content);
        container.appendChild(section);
      });
    } catch (e) {
      console.error("Errore caricamento notizie:", e);
      document.getElementById("news-container").innerHTML =
        "<div class='section'>Errore nel caricamento delle notizie. Riprova più tardi.</div>";
    }
  }

  loadNews();
</script>

</body>
</html>
